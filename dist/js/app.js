(()=>{var $=new Set,D=new Set;function T(e){return typeof e=="function"&&!!e.isT}function R(e){return typeof e=="object"&&e!==null&&"$on"in e&&typeof e.$on=="function"}function Q(e){return"$on"in e}function U(e){return(r,t)=>{function o(){let a=Array.from($);$.clear();let l=Array.from(D);D.clear(),a.forEach(n=>n(r,t)),l.forEach(n=>n()),$.size&&queueMicrotask(o)}$.size||queueMicrotask(o),$.add(e)}}var N={};function Y(e,r){let t=performance.now(),o=typeof r=="function";e=o?`${e} (ms)`:`${e} (calls)`;let a=o?r():r,l=o?performance.now()-t:r;return N[e]?N[e].push(l):N[e]=[l],a}var _=new Map;function C(e,r={}){if(R(e)||typeof e!="object")return e;let t=r.o||new Map,o=r.op||new Map,a=Array.isArray(e),l=[],n=a?[]:Object.create(e,{});for(let s in e){let i=e[s];typeof i=="object"&&i!==null?(n[s]=R(i)?i:C(i),l.push(s)):n[s]=i}let c=s=>(i,m)=>{let u=t.get(i),v=o.get(m);u||(u=new Set,t.set(i,u)),v||(v=new Set,o.set(m,v)),u[s](m),v[s](i)},f=c("add"),h=c("delete"),g=(s,i,m)=>{t.has(s)&&t.get(s).forEach(u=>u(i,m))},p={$on:f,$off:h,_em:g,_st:()=>({o:t,op:o,r:n,p:d._p}),_p:void 0},d=new Proxy(n,{has(s,i){return i in p||i in s},get(...s){let[,i]=s;if(Reflect.has(p,i))return Reflect.get(p,i);let m=Reflect.get(...s);return J(d,i),a&&i in Array.prototype?K(i,n,d,m):m},set(...s){let[i,m,u]=s,v=Reflect.get(i,m);if(Reflect.has(p,m))return Reflect.set(p,m,u);if(u&&R(v)){let k=v,A=k._st(),L=R(u)?Z(u,k):C(u,A);return Reflect.set(i,m,L),g(m,L),A.o.forEach((le,M)=>{let F=Reflect.get(v,M),q=Reflect.get(L,M);F!==q&&k._em(M,q,F)}),!0}let P=Reflect.set(...s);return P&&(v!==u&&g(m,u,v),d._p&&d._p[1]._em(...d._p)),P}});return r.p&&(d._p=r.p),l.map(s=>{d[s]._p=[s,d]}),d}function J(e,r){_.forEach(t=>{let o=t.get(e);o||(o=new Set,t.set(e,o)),o.add(r)})}function K(e,r,t,o){let a=(...l)=>{let n=Array.prototype[e].call(r,...l);if(r.forEach((c,f)=>t._em(String(f),c)),t._p){let[c,f]=t._p;f._em(c,t)}return n};switch(e){case"shift":case"pop":case"sort":case"reverse":case"copyWithin":return a;case"unshift":case"push":case"fill":return(...l)=>a(...l.map(n=>C(n)));case"splice":return function(l,n,...c){return arguments.length===1?a(l):a(l,n,...c.map(f=>C(f)))};default:return o}}function Z(e,r){let t=r._st();return t.o&&t.o.forEach((o,a)=>{o.forEach(l=>{e.$on(a,l)})}),t.p&&(e._p=t.p),e}function V(e,r){let t=Symbol();_.has(t)||_.set(t,new Map);let o=new Map,a=U(l);function l(){_.set(t,new Map);let n=e(),c=_.get(t);return _.delete(t),o.forEach((f,h)=>{let g=c.get(h);g&&g.forEach(E=>f.delete(E)),f.forEach(E=>h.$off(E,a))}),c.forEach((f,h)=>{f.forEach(g=>h.$on(g,a))}),o=c,r?r(n):n}return Q(e)&&e.$on(l),l()}var S=new WeakMap,O={},z="\u27B3\u274D",G="\u274D\u21DA",H=`<!--${z}-->`,ee=`<!--${G}-->`;function j(e,...r){let t=[],o="",a=(c,f)=>{if(typeof c=="function"){let h=()=>{};return t.push(Object.assign((...g)=>c(...g),{e:c,$on:g=>{h=g},_up:g=>{c=g,h()}})),f+H}return Array.isArray(c)?c.reduce((h,g)=>a(g,h),f):f+c},l=()=>(o||(!r.length&&e.length===1&&e[0]===""?o="<!---->":o=e.reduce(function(f,h,g){return f+=h,r[g]!==void 0?a(r[g],f):f},"")),o),n=c=>{let f=W(l()),h=I(f,{i:0,e:t});return c?h(c):h()};return n.isT=!0,n._k=0,n._h=()=>[l(),t,n._k],n.key=c=>(n._k=c,n),n}function I(e,r){let t,o=0,a=e.childNodes;for(;t=a.item(o++);){if(t.nodeType===8&&t.nodeValue===z){re(t,r);continue}t instanceof Element&&te(t,r),t.hasChildNodes()&&I(t,r),t instanceof HTMLOptionElement&&(t.selected=t.defaultSelected)}return l=>l?(l.appendChild(e),l):e}function te(e,r){var t;let o=[],a=0,l;for(;l=e.attributes[a++];){if(r.i>=r.e.length)return;if(l.value!==H)continue;let n=l.name,c=r.e[r.i++];if(n.charAt(0)==="@"){let f=n.substring(1);e.addEventListener(f,c),S.has(e)||S.set(e,new Map),(t=S.get(e))===null||t===void 0||t.set(f,c),o.push(n)}else{let f=n==="value"&&"value"in e||n==="checked"||n.startsWith(".")&&(n=n.substring(1));V(c,h=>{f&&(e[n]=h,e.getAttribute(n)!=h&&(h=!1)),h!==!1?e.setAttribute(n,h):(e.removeAttribute(n),a--)})}}o.forEach(n=>e.removeAttribute(n))}function ne(e){e.forEach(oe)}function oe(e){var r;e.remove(),(r=S.get(e))===null||r===void 0||r.forEach((t,o)=>e.removeEventListener(o,t))}function re(e,r){var t;let o=r.e[r.i++],a;if(o&&T(o.e))a=x().add(o.e)();else{let l;a=(l=V(o,n=>ce(n,l)))()}(t=e.parentNode)===null||t===void 0||t.replaceChild(a,e)}function ce(e,r){let t=typeof r=="function",o=t?r:x();return Array.isArray(e)?e.forEach(a=>Y("partialAdd",()=>o.add(a))):o.add(e),t&&o._up(),o}function W(e){var r;let o=((r=O[e])!==null&&r!==void 0?r:(()=>{let a=document.createElement("template");return a.innerHTML=e,O[e]=a})()).content.cloneNode(!0);return o.normalize(),o}function x(e=Symbol()){let r="",t={i:0,e:[]},o=[],a=[],l=new Map,n=[],c=()=>{let p;if(o.length||h(),o.length===1&&!T(o[0].tpl)){let d=o[0];d.dom.length?d.dom[0].nodeValue=d.tpl:d.dom.push(document.createTextNode(d.tpl)),p=d.dom[0]}else p=g(I(W(r),t)());return f(),p};c.ch=()=>a,c.l=0,c.add=p=>{if(!p&&p!==0)return c;let d=[],s,i="";T(p)&&([i,d,s]=p._h()),r+=i,r+=ee;let m=s&&l.get(s),u=m||{html:i,exp:d,dom:[],tpl:p,key:s};return o.push(u),s&&(m?m.exp.forEach((v,P)=>v._up(d[P].e)):l.set(s,u)),t.e.push(...d),c.l++,c},c._up=()=>{let p=x(e),d=0,s=a[0].dom[0];o.length||h(document.createComment(""));let i=()=>{if(!p.l)return;let u=p(),v=u.lastChild;s[d?"after":"before"](u),E(p,o,d),s=v};o.forEach((u,v)=>{let P=a[v];u.key&&u.dom.length?(i(),(!P||P.dom!==u.dom)&&s[v?"after":"before"](...u.dom),s=u.dom[u.dom.length-1]):P&&u.html===P.html&&!P.key?(i(),P.exp.forEach((k,A)=>k._up(u.exp[A].e)),u.exp=P.exp,u.dom=P.dom,s=u.dom[u.dom.length-1],se(u)&&s instanceof Text&&(s.nodeValue=u.tpl)):(P&&u.html!==P.html&&!P.key&&n.push(...P.dom),p.l||(d=v),p.add(u.tpl))}),i();let m=s==null?void 0:s.nextSibling;for(;m&&e in m;)n.push(m),m=m.nextSibling;ne(n),f()};let f=()=>{n.length=0,r="",c.l=0,t={i:0,e:[]},a=[...o],o=[]},h=p=>{r="<!---->",o.push({html:r,exp:[],dom:p?[p]:[],tpl:j`${r}`,key:0})},g=p=>{let d=0,s=[];return p.childNodes.forEach(i=>{if(i.nodeType===8&&i.data===G){d++,s.push(i);return}Object.defineProperty(i,e,{value:e}),o[d].dom.push(i)}),s.forEach(i=>i.remove()),p},E=(p,d,s)=>{p.ch().forEach((i,m)=>{d[s+m].dom=i.dom})};return c}function se(e){return e.dom.length===1&&!T(e.tpl)}var y=j,X=C;var w=X({user:[],APItoken:null,authToken:null,currentPage:"home",pages:{},allowedPages:["home","login","register","profile","settings"],TITLE_PREFIX:"YALP | "});var B=()=>{let e=w.TITLE_PREFIX,r=n=>{document.title=`${e}${n.charAt(0).toUpperCase()+n.slice(1)}`},t=n=>{w.allowedPages.includes(n)&&(w.currentPage=n,window.history.pushState({},"",`/${n}`),r(n))},o=(n,c)=>{w.allowedPages.includes(n)&&(w.pages[n]=c)},a=(n,c)=>y`
            <a href="#" @click="${f=>{f.preventDefault(),t(n)}}">${c}</a>
        `,l=()=>(r(w.currentPage),w.pages[w.currentPage]||y`<div>Page not found</div>`);return window.addEventListener("popstate",()=>{let n=window.location.pathname.slice(1)||"home";w.allowedPages.includes(n)&&t(n)}),{changePage:t,addPage:o,createPageLink:a,renderCurrentPage:l}};var ie=document.getElementById("app"),b=B();b.addPage("home",y`
    <div>
        <h1>Home Page</h1>
        ${b.createPageLink("login","Go to Login")}
        <!-- Or use direct changePage -->
        <button @click=${()=>b.changePage("login")}>Login</button>
    </div>
`);b.addPage("login",y`
    <div>
        <h1>Login Page</h1>
        ${b.createPageLink("home","Back to Home")}
    </div>
`);var ae=y`${b.renderCurrentPage}`;ae(ie);})();
