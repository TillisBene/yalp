(()=>{var $=new Set,q=new Set;function T(e){return typeof e=="function"&&!!e.isT}function S(e){return typeof e=="object"&&e!==null&&"$on"in e&&typeof e.$on=="function"}function Q(e){return"$on"in e}function U(e){return(r,t)=>{function o(){let a=Array.from($);$.clear();let l=Array.from(q);q.clear(),a.forEach(n=>n(r,t)),l.forEach(n=>n()),$.size&&queueMicrotask(o)}$.size||queueMicrotask(o),$.add(e)}}var N={};function Y(e,r){let t=performance.now(),o=typeof r=="function";e=o?`${e} (ms)`:`${e} (calls)`;let a=o?r():r,l=o?performance.now()-t:r;return N[e]?N[e].push(l):N[e]=[l],a}var _=new Map;function C(e,r={}){if(S(e)||typeof e!="object")return e;let t=r.o||new Map,o=r.op||new Map,a=Array.isArray(e),l=[],n=a?[]:Object.create(e,{});for(let i in e){let s=e[i];typeof s=="object"&&s!==null?(n[i]=S(s)?s:C(s),l.push(i)):n[i]=s}let c=i=>(s,m)=>{let u=t.get(s),v=o.get(m);u||(u=new Set,t.set(s,u)),v||(v=new Set,o.set(m,v)),u[i](m),v[i](s)},f=c("add"),h=c("delete"),g=(i,s,m)=>{t.has(i)&&t.get(i).forEach(u=>u(s,m))},p={$on:f,$off:h,_em:g,_st:()=>({o:t,op:o,r:n,p:d._p}),_p:void 0},d=new Proxy(n,{has(i,s){return s in p||s in i},get(...i){let[,s]=i;if(Reflect.has(p,s))return Reflect.get(p,s);let m=Reflect.get(...i);return Z(d,s),a&&s in Array.prototype?J(s,n,d,m):m},set(...i){let[s,m,u]=i,v=Reflect.get(s,m);if(Reflect.has(p,m))return Reflect.set(p,m,u);if(u&&S(v)){let k=v,A=k._st(),L=S(u)?K(u,k):C(u,A);return Reflect.set(s,m,L),g(m,L),A.o.forEach((le,M)=>{let F=Reflect.get(v,M),O=Reflect.get(L,M);F!==O&&k._em(M,O,F)}),!0}let P=Reflect.set(...i);return P&&(v!==u&&g(m,u,v),d._p&&d._p[1]._em(...d._p)),P}});return r.p&&(d._p=r.p),l.map(i=>{d[i]._p=[i,d]}),d}function Z(e,r){_.forEach(t=>{let o=t.get(e);o||(o=new Set,t.set(e,o)),o.add(r)})}function J(e,r,t,o){let a=(...l)=>{let n=Array.prototype[e].call(r,...l);if(r.forEach((c,f)=>t._em(String(f),c)),t._p){let[c,f]=t._p;f._em(c,t)}return n};switch(e){case"shift":case"pop":case"sort":case"reverse":case"copyWithin":return a;case"unshift":case"push":case"fill":return(...l)=>a(...l.map(n=>C(n)));case"splice":return function(l,n,...c){return arguments.length===1?a(l):a(l,n,...c.map(f=>C(f)))};default:return o}}function K(e,r){let t=r._st();return t.o&&t.o.forEach((o,a)=>{o.forEach(l=>{e.$on(a,l)})}),t.p&&(e._p=t.p),e}function V(e,r){let t=Symbol();_.has(t)||_.set(t,new Map);let o=new Map,a=U(l);function l(){_.set(t,new Map);let n=e(),c=_.get(t);return _.delete(t),o.forEach((f,h)=>{let g=c.get(h);g&&g.forEach(E=>f.delete(E)),f.forEach(E=>h.$off(E,a))}),c.forEach((f,h)=>{f.forEach(g=>h.$on(g,a))}),o=c,r?r(n):n}return Q(e)&&e.$on(l),l()}var R=new WeakMap,D={},z="\u27B3\u274D",G="\u274D\u21DA",H=`<!--${z}-->`,ee=`<!--${G}-->`;function j(e,...r){let t=[],o="",a=(c,f)=>{if(typeof c=="function"){let h=()=>{};return t.push(Object.assign((...g)=>c(...g),{e:c,$on:g=>{h=g},_up:g=>{c=g,h()}})),f+H}return Array.isArray(c)?c.reduce((h,g)=>a(g,h),f):f+c},l=()=>(o||(!r.length&&e.length===1&&e[0]===""?o="<!---->":o=e.reduce(function(f,h,g){return f+=h,r[g]!==void 0?a(r[g],f):f},"")),o),n=c=>{let f=W(l()),h=I(f,{i:0,e:t});return c?h(c):h()};return n.isT=!0,n._k=0,n._h=()=>[l(),t,n._k],n.key=c=>(n._k=c,n),n}function I(e,r){let t,o=0,a=e.childNodes;for(;t=a.item(o++);){if(t.nodeType===8&&t.nodeValue===z){re(t,r);continue}t instanceof Element&&te(t,r),t.hasChildNodes()&&I(t,r),t instanceof HTMLOptionElement&&(t.selected=t.defaultSelected)}return l=>l?(l.appendChild(e),l):e}function te(e,r){var t;let o=[],a=0,l;for(;l=e.attributes[a++];){if(r.i>=r.e.length)return;if(l.value!==H)continue;let n=l.name,c=r.e[r.i++];if(n.charAt(0)==="@"){let f=n.substring(1);e.addEventListener(f,c),R.has(e)||R.set(e,new Map),(t=R.get(e))===null||t===void 0||t.set(f,c),o.push(n)}else{let f=n==="value"&&"value"in e||n==="checked"||n.startsWith(".")&&(n=n.substring(1));V(c,h=>{f&&(e[n]=h,e.getAttribute(n)!=h&&(h=!1)),h!==!1?e.setAttribute(n,h):(e.removeAttribute(n),a--)})}}o.forEach(n=>e.removeAttribute(n))}function ne(e){e.forEach(oe)}function oe(e){var r;e.remove(),(r=R.get(e))===null||r===void 0||r.forEach((t,o)=>e.removeEventListener(o,t))}function re(e,r){var t;let o=r.e[r.i++],a;if(o&&T(o.e))a=x().add(o.e)();else{let l;a=(l=V(o,n=>ce(n,l)))()}(t=e.parentNode)===null||t===void 0||t.replaceChild(a,e)}function ce(e,r){let t=typeof r=="function",o=t?r:x();return Array.isArray(e)?e.forEach(a=>Y("partialAdd",()=>o.add(a))):o.add(e),t&&o._up(),o}function W(e){var r;let o=((r=D[e])!==null&&r!==void 0?r:(()=>{let a=document.createElement("template");return a.innerHTML=e,D[e]=a})()).content.cloneNode(!0);return o.normalize(),o}function x(e=Symbol()){let r="",t={i:0,e:[]},o=[],a=[],l=new Map,n=[],c=()=>{let p;if(o.length||h(),o.length===1&&!T(o[0].tpl)){let d=o[0];d.dom.length?d.dom[0].nodeValue=d.tpl:d.dom.push(document.createTextNode(d.tpl)),p=d.dom[0]}else p=g(I(W(r),t)());return f(),p};c.ch=()=>a,c.l=0,c.add=p=>{if(!p&&p!==0)return c;let d=[],i,s="";T(p)&&([s,d,i]=p._h()),r+=s,r+=ee;let m=i&&l.get(i),u=m||{html:s,exp:d,dom:[],tpl:p,key:i};return o.push(u),i&&(m?m.exp.forEach((v,P)=>v._up(d[P].e)):l.set(i,u)),t.e.push(...d),c.l++,c},c._up=()=>{let p=x(e),d=0,i=a[0].dom[0];o.length||h(document.createComment(""));let s=()=>{if(!p.l)return;let u=p(),v=u.lastChild;i[d?"after":"before"](u),E(p,o,d),i=v};o.forEach((u,v)=>{let P=a[v];u.key&&u.dom.length?(s(),(!P||P.dom!==u.dom)&&i[v?"after":"before"](...u.dom),i=u.dom[u.dom.length-1]):P&&u.html===P.html&&!P.key?(s(),P.exp.forEach((k,A)=>k._up(u.exp[A].e)),u.exp=P.exp,u.dom=P.dom,i=u.dom[u.dom.length-1],ie(u)&&i instanceof Text&&(i.nodeValue=u.tpl)):(P&&u.html!==P.html&&!P.key&&n.push(...P.dom),p.l||(d=v),p.add(u.tpl))}),s();let m=i==null?void 0:i.nextSibling;for(;m&&e in m;)n.push(m),m=m.nextSibling;ne(n),f()};let f=()=>{n.length=0,r="",c.l=0,t={i:0,e:[]},a=[...o],o=[]},h=p=>{r="<!---->",o.push({html:r,exp:[],dom:p?[p]:[],tpl:j`${r}`,key:0})},g=p=>{let d=0,i=[];return p.childNodes.forEach(s=>{if(s.nodeType===8&&s.data===G){d++,i.push(s);return}Object.defineProperty(s,e,{value:e}),o[d].dom.push(s)}),i.forEach(s=>s.remove()),p},E=(p,d,i)=>{p.ch().forEach((s,m)=>{d[i+m].dom=s.dom})};return c}function ie(e){return e.dom.length===1&&!T(e.tpl)}var y=j,X=C;var w=X({user:{id:null,username:null,email:null,profilePicture:null},APItoken:null,authToken:null,currentPage:"home",pages:{},allowedPages:["home","login","register","profile","settings"],TITLE_PREFIX:"YALP SOZIAL | "});var B=()=>{let e=w.TITLE_PREFIX,r=n=>{document.title=`${e}${n.charAt(0).toUpperCase()+n.slice(1)}`},t=n=>{w.allowedPages.includes(n)&&(w.currentPage=n,window.history.pushState({},"",`/${n}`),r(n))},o=(n,c)=>{w.allowedPages.includes(n)&&(w.pages[n]=c)},a=(n,c)=>y`
            <a href="#" @click="${f=>{f.preventDefault(),t(n)}}">${c}</a>
        `,l=()=>(r(w.currentPage),w.pages[w.currentPage]||y`<div>Page not found</div>`);return window.addEventListener("popstate",()=>{let n=window.location.pathname.slice(1)||"home";w.allowedPages.includes(n)&&t(n)}),{changePage:t,addPage:o,createPageLink:a,renderCurrentPage:l}};var se=document.getElementById("app"),b=B();b.addPage("home",y`
    <div>
        <h1>Home Page</h1>
        ${b.createPageLink("login","Go to Login")}
        <!-- Or use direct changePage -->
        <button @click=${()=>b.changePage("login")}>Login</button>
    </div>
`);b.addPage("login",y`
    <div>
        <h1>Login Page</h1>
        ${b.createPageLink("home","Back to Home")}
    </div>
`);var ae=y`${b.renderCurrentPage}`;ae(se);})();
